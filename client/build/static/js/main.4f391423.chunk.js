(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{156:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),s=a(16),u=a(18),o=a(2),i=a(3),m=a.n(i),d=a(5),p=a(49),f=a.n(p),b=f.a.create({baseURL:"/api",withCredentials:!0}),E=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"Login start"}),e.prev=1,e.next=4,b.post("users/signin",a);case 4:if(200!==(n=e.sent).status){e.next=8;break}return t({type:"Login success",payload:n.data.user}),e.abrupt("return",n.data.user);case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(1),console.error(e.t0),!e.t0.response){e.next=15;break}return e.abrupt("return",t({type:"Wrong credentials",payload:"Wrong credentials"}));case 15:t({type:"Login fail",payload:"Oops, something went wrong"});case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("/users/logout",{});case 3:200===e.sent.status&&t({type:"Logout"}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("/users/register",t);case 3:if(200!==(n=e.sent).status){e.next=7;break}return a({type:"Login success",payload:n.data.user}),e.abrupt("return",n.data.user);case 7:n.data.errors&&a({type:"Login fail",payload:n.data.errors}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),a({type:"Login fail",payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),g=a(8),O={userDetails:{name:"",id:"",email:""},error:null,loading:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Login start":return Object(g.a)(Object(g.a)({},e),{},{loading:!0});case"Login success":return Object(g.a)(Object(g.a)({},e),{},{userDetails:t.payload,loading:!1});case"Login fail":return Object(g.a)(Object(g.a)({},e),{},{error:t.payload,loading:!1});case"Wrong credentials":return Object(g.a)(Object(g.a)({},e),{},{error:"Wrong credentials",loading:!1});case"Logout":return{userDetails:{name:"",id:"",email:""},loading:!1,error:null};default:return e}},x=n.createContext(void 0),y=n.createContext(void 0),N=function(e){var t=e.children,a=n.useReducer(w,O),r=Object(o.a)(a,2),c=r[0],l=r[1];return n.createElement(x.Provider,{value:c},n.createElement(y.Provider,{value:l},t))};function j(){var e=n.useContext(x);if(void 0===e)throw new Error("useAuthState must be used within an AuthProvider");return e}function k(){var e=n.useContext(y);if(void 0===e)throw new Error("useAuthDispatch must be used within an AuthProvider");return e}var C=Object(u.b)(void 0),S=Object(u.b)({isOpen:!1,message:"",severity:"success"}),_=a(87),F=a(217),D=a(93),P=a.n(D),L=Object(_.a)({root:{fontFamily:"inherit"}}),R=function(){var e=Object(u.c)(S),t=Object(o.a)(e,2),a=t[0],r=a.isOpen,c=a.message,l=a.severity,s=t[1],i=L();return n.createElement(F.a,{open:r,autoHideDuration:1500,onClose:function(){s({isOpen:!1,message:c,severity:l})}},n.createElement(P.a,{severity:l,variant:"filled",className:i.root},c))},A=a(94),I=a(95),U=a(112),T=a(110),W=function(e){Object(U.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:void 0},n}return Object(I.a)(a,[{key:"render",value:function(){return this.state.hasError&&this.state.error?n.createElement(n.Fragment,null,n.createElement("h3",null,"Oh nooon, something went wrong :("),n.createElement("p",null,this.state.error)):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),a}(n.Component),H=a(22);function M(e){var t=r.a.useState(),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useCallback(Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("/users/profile/".concat(e),{responseType:"blob"});case 3:return a=t.sent,t.abrupt("return",c(URL.createObjectURL(a.data)));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",console.error(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[c,e]);return r.a.useEffect((function(){l()}),[l]),{pictureUrl:n}}var z=a(70),B=a(218),K=(a(156),function(e){var t=e.handleLogout,a=e.avatarURL,r=e.setIsOpen,c=j().userDetails,l=c.name,s=c.email;return n.createElement(z.a,{className:"user-dropdown"},n.createElement("div",{className:"user-info"},n.createElement(B.a,{src:a},l.split("")[0]),n.createElement("div",{className:"name-email"},n.createElement("p",null,l),n.createElement("p",{className:"user-email"},s))),n.createElement(H.b,{to:"/",className:"link",onClick:function(){return r(!1)}},n.createElement("div",{className:"dropdown-item"},"Dashboard")),n.createElement(H.b,{to:"/profile",className:"link",onClick:function(){return r(!1)}},n.createElement("div",{className:"dropdown-item"},"Profile")),n.createElement("div",{className:"dropdown-item logout",onClick:t},"Logout"))}),q=a(213),V=a(211),G=(a(160),function(e){var t=e.name,a=n.useState(!1),r=Object(o.a)(a,2),c=r[0],l=r[1],u=n.useState(),i=Object(o.a)(u,2),p=i[0],f=i[1],b=Object(s.g)(),E=M(j().userDetails.id).pictureUrl,h=k(),g=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v(h);case 3:b.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(V.a,{onClickAway:function(){return l(!1)}},n.createElement("div",{className:"user-header"},n.createElement(B.a,{src:E,className:"avatar",alt:t,"aria-haspopup":"true",onClick:function(e){f(e.target),l(!c)}},t.split("")[0].toUpperCase()),n.createElement(q.a,{open:c,anchorEl:p,"data-testid":"dropdown"},n.createElement(K,{handleLogout:g,avatarURL:E,setIsOpen:l}))))}),J=a(97),Y=a.n(J),X=(a(161),function(){return n.createElement("div",{className:"searchbar"},n.createElement("input",{type:"text",placeholder:"search...",className:"search-input"}),n.createElement("button",{className:"search-btn"},n.createElement(Y.a,{fontSize:"small"})))}),Q=a(214);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ee=n.createElement("defs",null,n.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"a"},n.createElement("stop",{stopColor:"#F8F8F8",offset:"0%"}),n.createElement("stop",{stopColor:"#F8F8F8",offset:"100%"}))),te=n.createElement("rect",{fill:"url(#a)",width:256,height:256,rx:25}),ae=n.createElement("rect",{fill:"#2f80ed",x:144.64,y:33.28,width:78.08,height:112,rx:12}),ne=n.createElement("rect",{fill:"#2f80ed",x:33.28,y:33.28,width:78.08,height:176,rx:12});function re(e,t){var a=e.title,r=e.titleId,c=$(e,["title","titleId"]);return n.createElement("svg",Z({width:40,height:40,viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},c),a?n.createElement("title",{id:r},a):null,ee,te,ae,ne)}var ce=n.forwardRef(re),le=(a.p,a(162),{background:"#F8F8F8",minHeight:60,maxHeight:60}),se=function(){var e=j().userDetails,t=e.id,a=e.name;return r.a.createElement(Q.a,{position:"static",style:le},r.a.createElement("header",{className:"header"},r.a.createElement(H.b,{to:"/",className:"title-container"},r.a.createElement(ce,{style:{width:30}}),r.a.createElement("h3",{className:"main-title"},"React-Trello")),t?r.a.createElement("nav",{className:"nav"},r.a.createElement(X,null),r.a.createElement(G,{name:a})):null))},ue=function(e){var t=Object.assign({},e);return j().userDetails.id?n.createElement(s.b,t):n.createElement(s.a,{to:"/"})},oe=function(){return n.createElement(s.a,{to:"/"})},ie=a(109);function me(){return(me=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("/users/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a(163);var de=function(e){var t=e.userId,a=e.name,r=e.style,c=M(t).pictureUrl;return n.createElement(B.a,{src:c,alt:"user",style:r},a.split("")[0].toUpperCase())},pe=(a(164),function(e){var t=e.title,a=e.id,r=e.users;return n.createElement(H.b,{to:"/boards/".concat(a),className:"board-thumbnail"},n.createElement("img",{alt:"board",width:"250",height:"150",src:"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=752&q=80"}),n.createElement("p",null,t),n.createElement("div",{className:"board-thumbnail-users"},r.map((function(e){var t=e.name,a=e._id;return n.createElement(de,{key:a,userId:a,name:t})}))))}),fe=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="column"===e.t0?3:"card"===e.t0?13:23;break;case 3:return e.prev=3,e.next=6,b.patch("/boards/".concat(a,"/column/add"),{title:n});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:return e.prev=10,e.t1=e.catch(3),e.abrupt("return",e.t1);case 13:return e.prev=13,e.next=16,b.patch("/columns/".concat(a,"/card/add"),{title:n});case 16:return c=e.sent,e.abrupt("return",c.data);case 20:return e.prev=20,e.t2=e.catch(13),e.abrupt("return",e.t2);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[3,10],[13,20]])})));return function(t,a,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.patch("/cards/".concat(a,"/").concat(n,"/update"),{text:t},{withCredentials:!0});case 3:return e.abrupt("return");case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",console.error(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.patch("/boards/".concat(t,"/user/").concat(a,"/add"),{withCredentials:!0});case 3:return e.abrupt("return");case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",console.error(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),ve=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.patch("/columns/drag/".concat(t,"/").concat(a),n);case 3:200===e.sent.status&&console.log("success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.patch("/boards/".concat(t,"/drag/").concat(a,"/").concat(n));case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return",console.log("success"));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.delete("/columns/".concat(t,"/delete"));case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return",console.log("success"));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("/boards/",{title:t});case 3:if(200!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.delete("/boards/".concat(t));case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return",console.log("success"));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),xe=a(66),ye=a.n(xe),Ne=(a(165),function(){var e=n.useState(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.useState(!1),l=Object(o.a)(c,2),u=l[0],i=l[1],p=n.useState(""),f=Object(o.a)(p,2),b=f[0],E=f[1],v=Object(s.g)(),h=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Oe(b);case 4:t=e.sent,v.push("/boards/".concat(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement("div",{onClick:function(e){r(e.target),i(!u)}},n.createElement("button",{className:"add-board-btn"},n.createElement(ye.a,null))),n.createElement(q.a,{open:u,anchorEl:a},n.createElement(V.a,{onClickAway:function(){return i(!1)}},n.createElement(z.a,null,n.createElement("input",{type:"text",value:b,onChange:function(e){e.preventDefault(),E(e.target.value)},className:"add-board-input",autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&h()}}),n.createElement("button",{className:"create-board-btn",onClick:h},"Create")))))}),je=(a(166),function(e){var t=e.id,a=Object(ie.a)(["getAllBoards",t],(function(){return function(e){return me.apply(this,arguments)}(t)})).data;return r.a.createElement("div",{className:"user-page"},r.a.createElement("header",{className:"user-page-header"},r.a.createElement("h2",null,"My boards"),r.a.createElement(Ne,null)),r.a.createElement("div",{className:"boards-list"},null===a||void 0===a?void 0:a.map((function(e){var t=e.title,a=e._id,n=e.users;return r.a.createElement(pe,{key:a,title:t,id:a,users:n})}))))}),ke=a(31),Ce=(a(167),function(){var e=Object(u.c)(S),t=Object(o.a)(e,2)[1],a=n.useState({email:"",password:""}),r=Object(o.a)(a,2),c=r[0],l=r[1],s=c.email,i=c.password,m=j().error;n.useEffect((function(){m&&t({isOpen:!0,message:m,severity:"error"})}),[m,t]);var d=function(e){var t=e.target,a=t.value,n=t.name;l(Object(g.a)(Object(g.a)({},c),{},Object(ke.a)({},n,a)))},p=k(),f=function(e){e.preventDefault(),E(p,c)};return n.createElement("div",{className:"form-container"},n.createElement("form",{"data-testid":"form",className:"signin-form",onSubmit:f,autoComplete:"off"},n.createElement("h3",null,"Sign in"),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"email",className:"label"},"Email"),n.createElement("input",{"aria-label":"email-input",id:"email",type:"email",name:"email",required:!0,value:s,onChange:d,autoComplete:"off",className:"input",placeholder:"Enter email"})),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"password",className:"label"},"Password"),n.createElement("input",{"aria-label":"password-input",id:"password",type:"password",name:"password",required:!0,value:i,onChange:d,className:"input",placeholder:"Enter password"})),n.createElement("button",{className:"button btn-blue",onClick:f},"Sign In"),n.createElement("p",null,"For testing, you can use: john@gmail.com / 12345678")))}),Se=function(){var e=k(),t=n.useState({name:"",email:"",password:"",confirmPassword:""}),a=Object(o.a)(t,2),r=a[0],c=a[1],l=r.name,s=r.email,u=r.password,i=r.confirmPassword,p=function(e){var t=e.target,a=t.value,n=t.name;c(Object(g.a)(Object(g.a)({},r),{},Object(ke.a)({},n,a)))},f=function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),u===i){t.next=3;break}return t.abrupt("return",alert("Passwords do not match"));case 3:return t.abrupt("return",h(r,e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.createElement("div",{className:"form-container"},n.createElement("form",{"data-testid":"form",className:"signin-form",onSubmit:f,autoComplete:"off"},n.createElement("h3",null,"Register"),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"name",className:"label"},"Name"),n.createElement("input",{"aria-label":"name-input",id:"name",type:"text",name:"name",required:!0,value:l,onChange:p,autoComplete:"off",className:"input",placeholder:"Enter name"})),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"email",className:"label"},"Email"),n.createElement("input",{"aria-label":"email-input",id:"email",type:"email",name:"email",required:!0,value:s,onChange:p,autoComplete:"off",className:"input",placeholder:"Enter email"})),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"password",className:"label"},"Password"),n.createElement("input",{"aria-label":"password-input",id:"password",type:"password",name:"password",required:!0,value:u,onChange:p,className:"input",placeholder:"Enter password",minLength:8})),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"confirmPassword",className:"label"},"Password"),n.createElement("input",{"aria-label":"confirmPassword-input",id:"confirmPassword",type:"password",name:"confirmPassword",required:!0,value:i,onChange:p,className:"input",placeholder:"Confirm password",minLength:8})),n.createElement("button",{className:"button btn-blue",onClick:f},"Register")))},_e=(a(168),function(){var e=n.useState(!1),t=Object(o.a)(e,2),a=t[0],r=t[1];return n.createElement("div",{className:"login-page"},a?n.createElement(Se,null):n.createElement(Ce,null),n.createElement("p",null,"Want to ",a?"login":"register"," ?"," ",n.createElement("span",{onClick:function(){return r(!a)}},"Click here")))}),Fe=a(215),De=Object(_.a)({root:{color:"#2f80ed"}}),Pe=function(e){var t=Object.assign({},e),a=De();return n.createElement(Fe.a,Object.assign({className:a.root},t))},Le=(a(169),function(){return n.createElement("div",{className:"spinner-container"},n.createElement(Pe,{size:50}),n.createElement("p",{className:"spinner-text"},"Waking server... This will take a few moments"))}),Re=function(){var e=j(),t=e.loading,a=e.userDetails.id;return t?n.createElement(Le,null):a?n.createElement(je,{id:a}):n.createElement(_e,null)},Ae=a(38),Ie=a(216),Ue=a(98),Te=a.n(Ue),We=(a(170),function(e){var t=e.user,a=Object(u.c)(S),r=Object(o.a)(a,2)[1],c=Object(u.c)(C),l=Object(o.a)(c,2),s=l[0],i=l[1],m=t._id,d=t.name;return n.createElement("div",{className:"user-list-item",onClick:function(){if(null===s||void 0===s?void 0:s.users.find((function(e){return e._id===t._id})))return r({isOpen:!0,message:"".concat(t.name," is already a part of the board"),severity:"info"});r({isOpen:!0,message:"User added",severity:"success"});var e=Object(g.a)({},s);e.users.push(t),i(e),Ee(s._id,m)}},n.createElement(de,{userId:m,name:d}),n.createElement("p",null,d))}),He=(a(171),function(e){var t=e.users;return e.isLoading?n.createElement("div",{className:"user-spinner"},n.createElement(Pe,{size:30})):n.createElement("div",{className:"users-list"},t.length?t.map((function(e){return n.createElement(We,{key:e._id,user:e})})):n.createElement("p",{className:"no-users"},"No users found"))}),Me=(a(172),function(e){var t=e.closePopper,a=n.useState(""),r=Object(o.a)(a,2),c=r[0],l=r[1],s=n.useState([]),u=Object(o.a)(s,2),i=u[0],p=u[1],f=n.useState(!1),E=Object(o.a)(f,2),v=E[0],h=E[1];function g(e){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("users?user=".concat(t));case 3:return a=e.sent,n=a.data,p(n),e.abrupt("return",h(!1));case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),h(!1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}n.useEffect((function(){var e=setTimeout(g,500,c);return function(){clearTimeout(e)}}),[c]);return n.createElement(V.a,{onClickAway:function(){return t(!1)}},n.createElement(z.a,null,n.createElement("input",{type:"text",autoFocus:!0,onChange:function(e){e.preventDefault(),h(!0),l(e.target.value)},className:"search-user-input",placeholder:"search users.."}),c?n.createElement(He,{users:i,isLoading:v}):null))}),ze=(a(173),function(){var e=n.useState(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.useState(),l=Object(o.a)(c,2),s=l[0],u=l[1];return n.createElement(n.Fragment,null,n.createElement("div",{onClick:function(e){u(e.target),r(!a)}},n.createElement("button",{className:"add-user-btn"},n.createElement(Te.a,{className:"plus-icon"}))),n.createElement(q.a,{open:a,anchorEl:s},n.createElement(Me,{closePopper:r})))}),Be=a(99),Ke=a.n(Be),qe=(a(174),function(e){var t=e.title,a=e.users,r=e.boardId,c=Object(s.g)(),l=n.useState(!1),u=Object(o.a)(l,2),i=u[0],p=u[1],f=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(r);case 2:p(!1),c.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",{className:"board-header"},n.createElement("div",{className:"board-users"},n.createElement("h3",{className:"board-title"},t),n.createElement("div",{className:"board-users-wrapper"},a.map((function(e){var t=e._id,a=e.name;return n.createElement(de,{userId:t,key:t,name:a})})),n.createElement(ze,null))),n.createElement("div",{className:"board-options"},n.createElement("button",{className:"delete-board",onClick:function(){return p(!0)}},n.createElement(Ke.a,{fontSize:"small"}),n.createElement("p",null,"Delete board"))),n.createElement(Ie.a,{open:i,onClose:function(){return p(!1)}},n.createElement("div",{className:"delete-board-dialog"},n.createElement("div",{className:"dialog-text"},n.createElement("h3",null,"Are you sure ?"),n.createElement("p",null,"This is a definitive action")),n.createElement("div",{className:"dialog-buttons"},n.createElement("button",{className:"button btn-grey",onClick:function(){return p(!1)}},"Cancel"),n.createElement("button",{className:"button btn-danger",onClick:f},"Delete")))))}),Ve=(a(175),function(e){var t=e.id,a=e.type,r=e.addFunction,c=n.useState(!1),l=Object(o.a)(c,2),s=l[0],u=l[1],i=n.useState(""),p=Object(o.a)(i,2),f=p[0],b=p[1],E=function(){var e=Object(d.a)(m.a.mark((function e(n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f.length){e.next=3;break}return e.abrupt("return",u(!1));case 3:return e.next=5,fe(a,t,f);case 5:c=e.sent,r(a,f,c,t),u(!1),b("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?n.createElement(V.a,{onClickAway:E},n.createElement("form",{onSubmit:E},n.createElement("input",{type:"text",className:"column"===a?"add-column-form":"add-card-form",autoFocus:!0,value:f,onChange:function(e){return b(e.target.value)}}))):n.createElement("div",{className:"add-btn ".concat("column"===a?"add-column":"add-card"),onClick:function(){return u(!0)}},n.createElement(ye.a,null),n.createElement("p",{className:"add-text"},"New ",a))}),Ge=function(e){var t=e.children,a=e.updaterFunction,r=e.inputStyles,c=e.id,l=e.field,s=e.parentId;if(!t)throw new Error("EditableElement component must have children");var i=Object(u.c)(C),m=Object(o.a)(i,2),d=m[0],p=m[1],f=n.useState(!1),b=Object(o.a)(f,2),E=b[0],v=b[1],h=n.useState(t.props.children),O=Object(o.a)(h,2),w=O[0],x=O[1],y=function(){if(v(!1),w!==t.props.children){if("title"===l&&s){var e,n=Object(g.a)({},d);(null===(e=n.columns.find((function(e){return e._id===s})))||void 0===e?void 0:e.cards.find((function(e){return e._id===c}))).title=w,p(n)}a(w,c,l)}};return E?n.createElement(V.a,{onClickAway:y},n.createElement("textarea",{value:w,onChange:function(e){e.preventDefault(),x(e.target.value)},className:t.props.className,style:r,autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&y()}})):n.createElement(n.Fragment,null,n.cloneElement(t,Object(g.a)(Object(g.a)({},t.props),{},{onClick:function(){v(!0)},children:w})))},Je=a(103),Ye=a.n(Je),Xe=a(104),Qe=a.n(Xe),Ze=a(105),$e=a.n(Ze),et=a(101),tt=a.n(et),at=a(102),nt=a.n(at),rt=a(100),ct=a.n(rt),lt=(a(176),function(e){var t=e.card,a=e.isModalOpen,r=e.closeModal,c=j().userDetails,l=c.id,s=c.name,u=t.title,o=t.description,i=t._id,m=t.column;return n.createElement(Ie.a,{open:a,onClose:r,className:"card-modal",maxWidth:!1},n.createElement("main",{className:"card"},n.createElement("section",{className:"upper-container"},n.createElement("div",{className:"card-header"},n.createElement(ct.a,null),n.createElement(Ge,{updaterFunction:be,id:i,field:"title",inputStyles:{resize:"none",margin:"21px 20px",border:"none",width:"60%",height:"28px",fontFamily:"inherit",fontSize:"24px",padding:"5px 5px",overflow:"hidden",fontWeight:700,outline:"1px solid #2f80ed",cursor:"text"},parentId:m},n.createElement("h2",null,u)))),n.createElement("section",{className:"lower-container"},n.createElement("div",{className:"card-details"},n.createElement("div",{className:"card-description-container"},n.createElement("div",{className:"card-header"},n.createElement(tt.a,null),n.createElement("h3",null,"Description")),n.createElement(Ge,{updaterFunction:be,inputStyles:{background:"#fff",height:108,outline:"1px solid #2f80ed",borderRadius:"5px",cursor:"text"},id:i,field:"description"},n.createElement("p",{className:"card-description"},o||"Add a more detailed description..."))),n.createElement("div",{className:"card-activity"},n.createElement("div",{className:"card-header"},n.createElement(nt.a,null),n.createElement("h3",null,"Activity")),n.createElement("div",{className:"card-header"},n.createElement(de,{name:s,userId:l,style:{width:"35px",height:"35px",marginLeft:"-5px"}}),n.createElement("textarea",{placeholder:"Write a comment...",className:"comment-input"})))),n.createElement("aside",{className:"card-functions"},n.createElement("h3",null,"Add to card"),n.createElement("div",{className:"card-btn-container"},n.createElement("button",{className:"card-function-btn"},n.createElement(Ye.a,{fontSize:"small"}),n.createElement("p",null,"Members")),n.createElement("button",{className:"card-function-btn"},n.createElement(Qe.a,{fontSize:"small"}),n.createElement("p",null,"Labels")),n.createElement("button",{className:"card-function-btn"},n.createElement($e.a,{fontSize:"small"}),n.createElement("p",null,"Attachment")))))))}),st=(a(177),function(e){var t=e.card,a=e.index,r=n.useState(!1),c=Object(o.a)(r,2),l=c[0],s=c[1];return n.createElement(Ae.b,{draggableId:t._id,index:a},(function(e){return n.createElement(n.Fragment,null,n.createElement("article",Object.assign({className:"card-thumbnail",ref:e.innerRef},e.draggableProps,e.dragHandleProps,{onClick:function(){return s(!0)}}),n.createElement("p",{className:"card-thumbnail-content"},t.title)),n.createElement(lt,{card:t,isModalOpen:l,closeModal:function(){return s(!1)}}))}))}),ut=(a(180),function(e){var t=e.title,a=e.columnId,r=n.useState(!1),c=Object(o.a)(r,2),l=c[0],s=c[1],u=n.useState(t),i=Object(o.a)(u,2),p=i[0],b=i[1],E=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!1),p===t){e.next=12;break}return e.prev=2,n="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL_DEV:"http://localhost:5000/api"}).REACT_APP_SERVER_URL,"/columns/").concat(a,"/title"),e.next=6,f.a.patch(n,{title:p},{withCredentials:!0});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),b(t);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return l?n.createElement(V.a,{onClickAway:E},n.createElement("input",{type:"text",value:p,onChange:function(e){e.preventDefault(),b(e.target.value)},className:"column-title",autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&E()}})):n.createElement("h2",{onClick:function(){return s(!0)},className:"column-title"},p)}),ot=a(108),it=a.n(ot),mt=(a(181),function(e){var t=e.title,a=e.columnId,r=e.cards,c=Object(u.c)(C),l=Object(o.a)(c,2),s=l[0],i=l[1],m=function(){if(s){var e=Object(g.a)({},s),t=e.columns.findIndex((function(e){return e._id===a}));e.columns.splice(t,1),i(e),ge(a)}};return n.createElement(Ae.c,{droppableId:a,type:"cards"},(function(e){return n.createElement("section",Object.assign({className:"column"},e.droppableProps,{ref:e.innerRef}),n.createElement("header",{className:"column-title-container"},n.createElement(ut,{title:t,columnId:a}),n.createElement(it.a,{className:"menu-icon",fontSize:"small",onClick:m})),r.map((function(e,t){return n.createElement(st,{card:e,index:t,key:e._id})})),e.placeholder)}))}),dt=(a(182),function(e){var t=e.columns,a=e.addCard;return n.createElement(n.Fragment,null,t.map((function(e,t){var r=e.title,c=e._id,l=e.cards;return n.createElement(Ae.b,{draggableId:c,index:t,key:c},(function(e){return n.createElement("div",Object.assign({className:"column"},e.draggableProps,{ref:e.innerRef},e.dragHandleProps),n.createElement(mt,{title:r,columnId:c,cards:l}),n.createElement(Ve,{id:c,type:"card",addFunction:a}))}))})))}),pt=(a(183),function(){var e=Object(s.h)().boardId,t=function(e){var t=Object(u.c)(C),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useCallback(Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("/boards/".concat(e));case 3:a=t.sent,c(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[c,e]);return r.a.useEffect((function(){return l(),function(){c(void 0)}}),[l,c]),{board:n,setBoard:c}}(e),a=t.board,c=t.setBoard,l=function(e,t,n,r){var l=Object(g.a)({},a);if("card"===e){var s=l.columns.find((function(e){return e._id===r}));null===s||void 0===s||s.cards.push({title:t,column:"",comments:[],labels:[],attachments:[],_id:n})}return"column"===e&&l.columns.push({title:t,cards:[],board:"",_id:n}),c(l)},i=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,l,s,u,i,d,p,f,b,E,v,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,r=t.destination,l=t.draggableId,s=t.type,r){e.next=3;break}return e.abrupt("return");case 3:if(u=Object(g.a)({},a),"column"!==s){e.next=9;break}return i=u.columns.splice(n.index,1),d=Object(o.a)(i,1),p=d[0],u.columns.splice(r.index,0,p),c(u),e.abrupt("return",he(u._id,p._id,r.index));case 9:return f=u.columns.find((function(e){return e._id===n.droppableId})),b=u.columns.find((function(e){return e._id===r.droppableId})),E=f.cards.splice(n.index,1),v=Object(o.a)(E,1),h=v[0],b.cards.splice(r.index,0,h),c(u),e.abrupt("return",ve(n.droppableId,l,r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?n.createElement("main",{className:"board-page"},n.createElement(qe,{title:a.title,users:a.users,boardId:a._id}),n.createElement(Ae.a,{onDragEnd:i},n.createElement(Ae.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(t){return n.createElement("div",Object.assign({className:"columns"},t.droppableProps,{ref:t.innerRef}),n.createElement(dt,{addCard:l,columns:a.columns}),t.placeholder,n.createElement(Ve,{id:e,type:"column",addFunction:l}))})))):n.createElement(n.Fragment,null)}),ft=(a(184),function(){var e=n.useState(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData,a){e.next=4;break}return e.abrupt("return",alert("Please select a picture"));case 4:return n.append("attachment",a),e.prev=5,e.next=8,f.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL_DEV:"http://localhost:5000/api"}).REACT_APP_SERVER_URL,"/users/profile/add"),n,{withCredentials:!0});case 8:r(void 0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return n.createElement("div",{className:"image-upload"},n.createElement("p",null,"Change profile picture"),n.createElement("form",{className:"picture-form",onSubmit:c},n.createElement("label",{htmlFor:"img",className:"picture-input-label"}," ",n.createElement("img",{src:a?URL.createObjectURL(a):"https://www.doctorlasercursos.com.br/uploads/avatars/2016/06/empty-avatar.jpg",alt:"uploaded",height:80,width:80})),n.createElement("input",{type:"file",onChange:function(e){e.target.files&&r(e.target.files[0])},id:"img",className:"picture-input"}),n.createElement("button",{onClick:c,className:"upload-button"},"Upload")))}),bt=(a(185),function(){var e=j().userDetails,t=e.name,a=e.email,r=n.useState({name:t,email:a}),c=Object(o.a)(r,2),l=c[0],s=c[1],u=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;s(Object(g.a)(Object(g.a)({},l),{},Object(ke.a)({},a,n)))},i=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement("div",{className:"profile-page"},n.createElement("form",{onSubmit:i,className:"signin-form"},n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"name",className:"label"},"Name:"),n.createElement("input",{type:"text",value:l.name,name:"name",onChange:u,className:"input"})),n.createElement("div",{className:"form-field"},n.createElement("label",{htmlFor:"email",className:"label"},"Email:"),n.createElement("input",{type:"text",value:l.email,name:"email",onChange:u,className:"input"})),n.createElement("button",{type:"submit",className:"button btn-blue"},"Save changes")),n.createElement(ft,null))}),Et=(a(186),function(){return function(e){var t=r.a.useState(!0),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useCallback(Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("/users/session");case 3:if(!(a=t.sent).data){t.next=7;break}return e({type:"Login success",payload:a.data}),t.abrupt("return",c(!1));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),e({type:"Login fail",payload:t.t0}),t.abrupt("return",c(!1));case 13:c(!1);case 14:case"end":return t.stop()}}),t,null,[[0,9]])}))),[e]);return r.a.useEffect((function(){l()}),[l]),{isLoading:n}}(k()).isLoading?null:n.createElement(u.a,null,n.createElement("div",{className:"App"},n.createElement(se,null),n.createElement(W,null,n.createElement(s.d,null,n.createElement(s.b,{path:"/",exact:!0,component:Re}),n.createElement(ue,{component:pt,path:"/boards/:boardId",exact:!0}),n.createElement(ue,{path:"/profile",exact:!0,component:bt}),n.createElement(s.b,{component:oe}))),n.createElement(R,null)))});a(187);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,{basename:""},r.a.createElement(N,null,r.a.createElement(Et,null)))),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.4f391423.chunk.js.map